{
	instances = {	
		langfout = Template(templatefile = f"-templates/1-100.html");
		langopt = Template(templatefile = f"-templates/0-100.html");
		tweetopt = Template(templatefile = f"-templates/0-140.html");

		finalize = PostFieldReader(
			field_agree = "^.+$", 
			field_tnv = "^.{1,100}$",
			field_nummer = "^.{1,100}$",
			field_plaats = "^.{0,100}$",
			field_opmerking = "^.{0,140}$",
			maperrors = true
		) {
			agree_failure_branch = Template(templatefile = f"-templates/necessary.html");
			tnv_failure_branch = instances.langfout;
			nummer_failure_branch = instances.langfout;
			plaats_failure_branch = instances.langopt;
			opmerking_failure_branch = instances.tweetopt;

			form_branch = Template(templatefile = f"-templates/finalize.html");
			successful_branch = MySqlQuerier(
				query = f"-queries/SetRekening.sql", credset = "megalan", 
				params = ["tnv", "nummer", "plaats"]
			) {
				single_branch = MySqlQuerier(
					query = f"-queries/SetDeelnemerRekening.sql", credset = "megalan",
					params = ["deelnemer", "rekening", "opmerking"]
				) {
					oneaffected_branch = Template(templatefile = f"-templates/finalized.html");
				}
			};
		};

		registerbestelling = Template(templatefile = f"-templates/adresview.html") {
			next_branch = Module(file = f"bestelling.conf", branch = "acquire") {
				acquired_branch = instances.finalize;
			};		
		}; 

		registeradres = Template(templatefile = f"-templates/persoonview.html") {
			next_branch = Module(file = f"adres.conf", branch = "acquire") {
				acquired_branch = instances.registerbestelling;
			};
		};

		register = Module(file = f"deelnemer.conf", branch = "acquire") {
			acquired_branch = Module(file = f"persoon.conf", branch = "acquire") {
				acquired_branch = instances.registeradres;
			};
		};
	};
}